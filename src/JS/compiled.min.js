function AddUnsigned(e,t){const i=2147483648&e,s=2147483648&t,r=1073741824&e,a=1073741824&t,n=(1073741823&e)+(1073741823&t);return r&a?2147483648^n^i^s:r|a?n^(1073741824&n?3221225472:1073741824)^i^s:n^i^s}function FF(e,t,i,s,r,a,n){return e=AddUnsigned(e,AddUnsigned(AddUnsigned(F(t,i,s),r),n)),AddUnsigned(RotateLeft(e,a),t)}function GG(e,t,i,s,r,a,n){return e=AddUnsigned(e,AddUnsigned(AddUnsigned(G(t,i,s),r),n)),AddUnsigned(RotateLeft(e,a),t)}function HH(e,t,i,s,r,a,n){return e=AddUnsigned(e,AddUnsigned(AddUnsigned(H(t,i,s),r),n)),AddUnsigned(RotateLeft(e,a),t)}function II(e,t,i,s,r,a,n){return e=AddUnsigned(e,AddUnsigned(AddUnsigned(I(t,i,s),r),n)),AddUnsigned(RotateLeft(e,a),t)}function ConvertToWordArray(e){let t;const i=e.length,s=i+8,r=(s-s%64)/64,a=16*(r+1),n=Array(a-1);let o=0,l=0;for(;l<i;)t=(l-l%4)/4,o=l%4*8,n[t]=n[t]|e.charCodeAt(l)<<o,l++;return t=(l-l%4)/4,o=l%4*8,n[t]=n[t]|128<<o,n[a-2]=i<<3,n[a-1]=i>>>29,n}function WordToHex(e){let t,i,s="",r="";for(i=0;i<=3;i++)t=e>>>8*i&255,r="0"+t.toString(16),s+=r.substr(r.length-2,2);return s}function Utf8Encode(e){e=(e+"").replace(/\r\n/g,"\n");let t="";for(let i=0;i<e.length;i++){const s=e.charCodeAt(i);s<128?t+=String.fromCharCode(s):s>127&&s<2048?(t+=String.fromCharCode(s>>6|192),t+=String.fromCharCode(63&s|128)):(t+=String.fromCharCode(s>>12|224),t+=String.fromCharCode(s>>6&63|128),t+=String.fromCharCode(63&s|128))}return t}function logx(e,t){return Math.log(e)/Math.log(t)}function randomBetween(e,t){return Math.random()*(t-e)+e}function random(e,t){return randomBetween(e,t)}function randomInt(e,t){return Math.floor(randomBetween(e,t))}function map(e,t,i,s,r){return s+(r-s)/(i-t)*(e-t)}function threshold(e,t,i){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))-2*i<0}function FrameIDToTime(e){var t=e/60;return t}function distance(e,t,i,s){return Math.pow(Math.pow(e-i,2)+Math.pow(t-s,2),.5)}function randomChoice(e){let t=Math.round(Math.random()*e.length);return e[t]}function randomChoiceNot(e,t){let i=randomChoice(e);for(;i in t;)i=randomChoice(e);return i}function randomBetweenNot(e,t,i){let s=randomBetween(e,t);for(;s in i;)s=randomBetween(e,t);return s}function intBetweenNot(e,t,i){let s=randomInt(e,t);for(;s in i;)s=randomInt(e,t);return s}function coinFlip(e){return Math.random()>e}function clip(e,t,i){return Math.min(Math.max(e,t),i)}function strictScale(e,t,i,s,r){return clip(map(clip(e,t,i),t,i,s,r),s,r)}function sum(e){let t=0;for(let i=0;i<e.length;i++)t+=e[i];return t}function minl(e){let t;for(let i=0;i<=e.length;i++)t=Math.min(t,e[i]);return t}function maxl(e){let t;for(let i=0;i<=e.length;i++)t=Math.max(t,e[i]);return t}function AddDebugItem(e,t){if(!DEBUGFLAG)return null;var i=document.createElement("li");return i.id=t,i.innerText=e.toString(),i.classList.add("debugItem"),debugList.appendChild(i),debugList}function SetDebugItem(e,t){if(!DEBUGFLAG)return null;var i=document.getElementById(t);return i.innerText=t.toString()+": "+e.toString(),i}function CreateUpgrades(){let e=new Upgrade("gigantisizer","increases projectile size, decreases projectile speed."),t=new Upgrade("shrinker","decreases projectile size, increases projectile speed."),i=new Upgrade("tankifier","increases health, decreases everything else."),s=new Upgrade("slowifier","Makes shots super slow, and damage super high."),r=new Upgrade("quickifier","Makes shots super quick, but have very little damage."),a=[];return e.addEffect(new Effect("ss",-10,1)),e.addEffect(new Effect("sz",10,1)),t.addEffect(new Effect("ss",10,1)),t.addEffect(new Effect("sz",-10,1)),i.addEffect(new Effect("d",-1,1)),i.addEffect(new Effect("h",1,1)),i.addEffect(new Effect("ms",-1,1)),i.addEffect(new Effect("sf",-1,1)),i.addEffect(new Effect("ss",-1,1)),i.addEffect(new Effect("sz",-1,1)),s.addEffect(new Effect("d",20,3)),s.addEffect(new Effect("ss",.5,3)),r.addEffect(new Effect("ss",20,3)),r.addEffect(new Effect("d",.5,3)),e.addRequirement(new Requirement(t,null,"not",!1)),t.addRequirement(new Requirement(e,null,"not",!1)),s.addRequirement(new Requirement(r,null,"not",!1)),r.addRequirement(new Requirement(s,null,"not",!1)),a.push(e),a.push(t),a.push(i),a.push(s),a.push(r),a}function CreateRandomUpgrades(){let e=[],t=["d","h","ms","sf","ss","sz"],i=["and","or","not"];for(let i=0;i<100;i++){let i=new Upgrade("","");for(let e=0;e<randomInt(1,t.length-1);e++){let e=randomChoice(t);for(;e in i.effects;)e=randomChoice(t);let s=randomInt(-50,50),r=randomInt(1,3);3==r&&(s=Math.abs(s)),i.addEffect(new Effect(e,s,r))}e.push(i)}for(let t=0;t<e.length;t++){let s=e[t];s.addRequirement(new Requirement(randomChoiceNot(e,[s]),randomChoiceNot(e,[s]),randomChoice(i),coinFlip(.5)))}return e}function SetProgressBar(e){XPBar.value=e/10}function IncreaseProgressBar(e){XPBar.value=XPBar.value+e/10}function AnimateProgressBar(e){XPBar.style.backgroundColor=`linear-gradient(90deg, #5ba2ac ${e%100}%, #28257f ${(e+50)%100}%, #1a641a ${(e+100)%100}%);`}function ResetProgressBar(){XPBar.value=0,XPBar.max=1,player.level=0,player.cachedLevels=0}function CheckForLevelUp(){return XPBar.value>=XPBar.max&&(player.level+=1,player.cachedLevels+=1,XPBar.value=0,XPBar.max=player.level,!0)}function CreateHealth(e,t){let i=new HealthBar(e,t);return i}function animate(){animationID=requestAnimationFrame(animate),Paused||(CheckForLevelUp(),SetDebugItem(player.level,"playerLevel"),SetDebugItem(player.cachedLevels,"playerCashedLevels"),(animationID%Math.floor(EnemySpawnTime)==0&&enemies.length<MaxEnemies||enemies.length<MaxEnemies-5)&&(SpawnEnemy(),EnemySpawnTime-=.125),SetDebugItem(EnemySpawnTime,"SpawnTime"),player.update(),AnimateProgressBar(animationID),c.fillRect(0,0,w,h),UseParticles&&particles.forEach((e,t)=>{e.alpha<=0?particles.splice(t,1):e.update()}),projectiles.forEach((e,t)=>{e.update(),(e.x+e.radius<0||e.y+e.radius<0||e.x-e.radius>w||e.y-e.radius>h)&&(projectiles.splice(t,1),SFXMuted||MissSound.play())}),enemies.forEach((e,t)=>{e.update();const i=distance(player.x,player.y,e.x,e.y);i-e.radius-player.radius<0&&(player.willDie?(player.Health.removeHealth(),gameOver(animationID)):(player.Health.removeHealth(),SFXMuted||HealthLooseSound.play(),enemies.splice(t,1),SetDebugItem(player.Health.Health,"playerHealth"),EnemySpawnTime=Math.max(50,EnemySpawnTime+10))),projectiles.forEach((i,s)=>{const r=distance(i.x,i.y,e.x,e.y);if(r-e.radius-i.radius<0){for(let t=0;t<Math.round(2*e.radius*ParticleMultiplier*Math.random());t++)particles.push(new Particle(i.x,i.y,4*Math.random()+1,e.color,{x:(Math.random()+i.velocity.x/(2*player.ShotSpeed*ProjectileSpeedMultiplier))*Math.random()*ParticleSpeed,y:(Math.random()+i.velocity.y/(2*player.ShotSpeed*ProjectileSpeedMultiplier))*Math.random()*ParticleSpeed}));e.ShouldDie(i.damage)?(SFXMuted||HitAndKillSound.play(),AddScore(250),setTimeout(()=>{enemies.splice(t,1),projectiles.splice(s,1)},2)):(SFXMuted||HitNoKillSound.play(),AddScore(100),e.radius-=i.damage,setTimeout(()=>{projectiles.splice(s,1)},2))}r-e.radius-i.radius<20&&(SFXMuted||MissSound.play())})}),lastScore%freq>score%freq&&0!=score&&(player.Health.addHealth(1),SFXMuted||HealthGetSound.play()),lastScore=score)}function init(){EnemySpawnTime=DefaultEnemySpawnTime,Paused=!1,player=new Player(cw,ch,PlayerRadius,PlayerColor),projectiles=[],enemies=[],particles=[],score=0,scoreEL.innerHTML=score.toString(10),BigScoreEL.innerHTML=score.toString(10),XPBar.style.display="initial",ResetProgressBar(),GameStarted=!0}function PageLoad(){HighScoreLabel.style.display="none",ModalEL.style.display="flex",XPBar.style.display="none",OptionsSFXSlider.value="0",OptionsMusicSlider.value="0",CloseOptionsMenu(),HighScoreList.style.display="none",UnpauseGame(),MusicPlayer.pause(),AddDebugItem(0,"playerLevel"),AddDebugItem(0,"playerCashedLevels"),AddDebugItem(!1,"CantSpawn"),AddDebugItem(5,"playerHealth"),AddDebugItem(EnemySpawnTime,"SpawnTime"),AddDebugItem(EnemySpawnBias,"Bias"),player.Health.draw(),Paused=!0,OptionsOpen=!1}function UpdateSFXSlider(){ShootSound.muted=SFXMuted,HitNoKillSound.muted=SFXMuted,HitAndKillSound.muted=SFXMuted,HealthGetSound.muted=SFXMuted,HealthLooseSound.muted=SFXMuted,MissSound.muted=SFXMuted,SFXMuted||(ShootSound.volume=parseFloat(OptionsSFXSlider.value),HitNoKillSound.volume=parseFloat(OptionsSFXSlider.value),HitAndKillSound.volume=parseFloat(OptionsSFXSlider.value),HealthGetSound.volume=parseFloat(OptionsSFXSlider.value),HealthLooseSound.volume=parseFloat(OptionsSFXSlider.value),MissSound.volume=parseFloat(OptionsSFXSlider.value))}function PlayMusic(){MusicMuted||MusicPlayer.shuffle()}function SpawnEnemy(){function e(e){let t,i;const s=26*Math.random()*EnemyHealthMultiplier+4;coinFlip(EnemySpawnBias)?(t=Math.random()<.5?0-s:w+s,i=Math.random()*h):(t=Math.random()*w,i=Math.random()<.5?0-s:h+s);const r=`hsl(${360*Math.random()},50%,50%)`,a=Math.atan2(ch-i,cw-t),n={x:Math.cos(a)*EnemySpeedMultiplier,y:Math.sin(a)*EnemySpeedMultiplier};return new Enemy(t,i,s,r,n,e)}let t=e();for(;null!=enemies.find(e=>e.id==t.id);)t=e(Math.random()),console.count("collisions: ");enemies.push(t)}function AddScore(e){score+=e,scoreEL.innerHTML=score.toString(10),BigScoreEL.innerHTML=score.toString(10)}function gameOver(e){cancelAnimationFrame(e),HS=!!Scores.scores.every(e=>e<score),Scores.addScore(score),GameStarted=!1,ModalEL.setAttribute("style","display:flex;"),HighScoreList.innerHTML=Scores.Html,console.log(Scores),HighScoreLabel.style.display=HS?"block":"none",BigScoreELLabel.style.display="block",BigScoreEL.style.display="block",BigScoreEL.innerText=score.toString(),BigScoreEL.classList.add("animate-bounce")}function PauseGame(){PauseModal.style.display="block",PauseModalScore.innerHTML=score.toString(10),Paused=!0}function UnpauseGame(){PauseModal.style.display="none",Paused=!1}function OpenOptionsMenu(){OptionsParticleSpan.style.display="block",OptionsMenu.style.display="block",OptionsSFXSlider.style.display="block",OptionsBackButton.style.display="block",OptionsParticleSwitch.style.display="block",OptionsOpen=!0}function CloseOptionsMenu(){OptionsParticleSpan.style.display="none",OptionsMenu.style.display="none",OptionsSFXSlider.style.display="none",OptionsBackButton.style.display="none",OptionsParticleSwitch.style.display="none",OptionsOpen=!1}function spawnProjectile(e=mouseX,t=mouseY){if(1==GameStarted&&0==Paused){const i=Math.atan2(t-ch,e-cw),s={x:Math.cos(i)*player.ShotSpeed*ProjectileSpeedMultiplier,y:Math.sin(i)*player.ShotSpeed*ProjectileSpeedMultiplier,m:Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},r=5,a=player.Damage;projectiles.push(new Projectile(cw,ch,r,ProjectileColor,s,a)),SFXMuted||ShootSound.play()}}function updateMouseCoords(e){mouseX=e.clientX,mouseY=e.clientY}const canvas=document.querySelector("canvas"),c=canvas.getContext("2d");canvas.width=innerWidth,canvas.height=innerHeight,c.shadowBlur=20,c.shadowColor="black";const scoreEL=document.querySelector("#scoreEL"),MoneyEL=document.querySelector("#moneyEL"),ShopMoney=document.querySelector("#ShopMoney"),startGameButton=document.querySelector("#StartGameWrapper"),HighScoreLabel=document.querySelector("#highScoreTextModal"),ModalEL=document.querySelector("#ModalEL"),TitleEL=document.querySelector("#titleElement"),BigScoreEL=document.querySelector("#BigScoreEL"),BigScoreELLabel=document.querySelector("#PointsLabelEL"),NameDiv=document.querySelector("#NameInputDiv"),HighScoreList=document.querySelector("#HighScore"),ShootSound=new Audio("../Audio/sound/Shoot.wav"),HitNoKillSound=new Audio("../Audio/sound/HitNoKill.wav"),HitAndKillSound=new Audio("Audio/sound/HitAndKill.wav"),HealthGetSound=new Audio("Audio/sound/HealthGet.wav"),HealthLooseSound=new Audio("Audio/sound/HealthLose.wav"),MissSound=new Audio("Audio/sound/Miss.wav"),Music1=new Audio("Audio/music/Music1.mp3"),Music2=new Audio("Audio/music/Music2.mp3"),Music3=new Audio("Audio/music/Music3.mp3"),Music4=new Audio("Audio/music/Music4.mp3"),Music5=new Audio("Audio/music/Music5.mp3"),PauseModal=document.querySelector("#PauseModal"),PauseModalScore=document.querySelector("#PauseModalScore"),PauseModalScoreLabel=document.querySelector("#PauseModalScoreLabel"),PauseModalOptionsButton=document.querySelector("#PauseModalOptionsButton"),PauseModalPlayButton=document.querySelector("#PauseModalPlayButton"),OptionsMenu=document.querySelector("#OptionsModal"),OptionsSFXSlider=document.querySelector("#SFXSlider"),OptionsMusicSlider=document.querySelector("#MusicSlider"),OptionsParticleSwitch=document.querySelector("#ParticleOptionsSwitch"),OptionsBackButton=document.querySelector("#OptionsBackButton"),OptionsParticleSpan=document.querySelector("#ParticleOptionsSpan"),XPBar=document.querySelector("#XPBar"),XPBarLabel=document.querySelector("#XPbarLabel"),debugDiv=document.querySelector("#debugDiv"),debugList=document.querySelector("#debugList"),w=canvas.width,h=canvas.height,cw=w/2,ch=h/2,DEBUGFLAG=!0;let SFXMuted=!0,OptionsOpen=!1,mouseX=0,mouseY=0;const RotateLeft=(e,t)=>e<<t|e>>>32-t,F=(e,t,i)=>e&t|~e&i,G=(e,t,i)=>e&i|t&~i,H=(e,t,i)=>e^t^i,I=(e,t,i)=>t^(e|~i),S11=7,S12=12,S13=17,S14=22,S21=5,S22=9,S23=14,S24=20,S31=4,S32=11,S33=16,S34=23,S41=6,S42=10,S43=15,S44=21,md5=e=>{let t,i,s,r,a;e=Utf8Encode(e);const n=ConvertToWordArray(e);let o=1732584193,l=4023233417,d=2562383102,u=271733878;for(t=0;t<n.length;t+=16)i=o,s=l,r=d,a=u,o=FF(o,l,d,u,n[t+0],S11,3614090360),u=FF(u,o,l,d,n[t+1],S12,3905402710),d=FF(d,u,o,l,n[t+2],S13,606105819),l=FF(l,d,u,o,n[t+3],S14,3250441966),o=FF(o,l,d,u,n[t+4],S11,4118548399),u=FF(u,o,l,d,n[t+5],S12,1200080426),d=FF(d,u,o,l,n[t+6],S13,2821735955),l=FF(l,d,u,o,n[t+7],S14,4249261313),o=FF(o,l,d,u,n[t+8],S11,1770035416),u=FF(u,o,l,d,n[t+9],S12,2336552879),d=FF(d,u,o,l,n[t+10],S13,4294925233),l=FF(l,d,u,o,n[t+11],S14,2304563134),o=FF(o,l,d,u,n[t+12],S11,1804603682),u=FF(u,o,l,d,n[t+13],S12,4254626195),d=FF(d,u,o,l,n[t+14],S13,2792965006),l=FF(l,d,u,o,n[t+15],S14,1236535329),o=GG(o,l,d,u,n[t+1],S21,4129170786),u=GG(u,o,l,d,n[t+6],S22,3225465664),d=GG(d,u,o,l,n[t+11],S23,643717713),l=GG(l,d,u,o,n[t+0],S24,3921069994),o=GG(o,l,d,u,n[t+5],S21,3593408605),u=GG(u,o,l,d,n[t+10],S22,38016083),d=GG(d,u,o,l,n[t+15],S23,3634488961),l=GG(l,d,u,o,n[t+4],S24,3889429448),o=GG(o,l,d,u,n[t+9],S21,568446438),u=GG(u,o,l,d,n[t+14],S22,3275163606),d=GG(d,u,o,l,n[t+3],S23,4107603335),l=GG(l,d,u,o,n[t+8],S24,1163531501),o=GG(o,l,d,u,n[t+13],S21,2850285829),u=GG(u,o,l,d,n[t+2],S22,4243563512),d=GG(d,u,o,l,n[t+7],S23,1735328473),l=GG(l,d,u,o,n[t+12],S24,2368359562),o=HH(o,l,d,u,n[t+5],S31,4294588738),u=HH(u,o,l,d,n[t+8],S32,2272392833),d=HH(d,u,o,l,n[t+11],S33,1839030562),l=HH(l,d,u,o,n[t+14],S34,4259657740),o=HH(o,l,d,u,n[t+1],S31,2763975236),u=HH(u,o,l,d,n[t+4],S32,1272893353),d=HH(d,u,o,l,n[t+7],S33,4139469664),l=HH(l,d,u,o,n[t+10],S34,3200236656),o=HH(o,l,d,u,n[t+13],S31,681279174),u=HH(u,o,l,d,n[t+0],S32,3936430074),d=HH(d,u,o,l,n[t+3],S33,3572445317),l=HH(l,d,u,o,n[t+6],S34,76029189),o=HH(o,l,d,u,n[t+9],S31,3654602809),u=HH(u,o,l,d,n[t+12],S32,3873151461),d=HH(d,u,o,l,n[t+15],S33,530742520),l=HH(l,d,u,o,n[t+2],S34,3299628645),o=II(o,l,d,u,n[t+0],S41,4096336452),u=II(u,o,l,d,n[t+7],S42,1126891415),d=II(d,u,o,l,n[t+14],S43,2878612391),l=II(l,d,u,o,n[t+5],S44,4237533241),o=II(o,l,d,u,n[t+12],S41,1700485571),u=II(u,o,l,d,n[t+3],S42,2399980690),d=II(d,u,o,l,n[t+10],S43,4293915773),l=II(l,d,u,o,n[t+1],S44,2240044497),o=II(o,l,d,u,n[t+8],S41,1873313359),u=II(u,o,l,d,n[t+15],S42,4264355552),d=II(d,u,o,l,n[t+6],S43,2734768916),l=II(l,d,u,o,n[t+13],S44,1309151649),o=II(o,l,d,u,n[t+4],S41,4149444226),u=II(u,o,l,d,n[t+11],S42,3174756917),d=II(d,u,o,l,n[t+2],S43,718787259),l=II(l,d,u,o,n[t+9],S44,3951481745),o=AddUnsigned(o,i),l=AddUnsigned(l,s),d=AddUnsigned(d,r),u=AddUnsigned(u,a);return(WordToHex(o)+WordToHex(l)+WordToHex(d)+WordToHex(u)).toLowerCase()};AddDebugItem(0,"playerHealth");class Upgrade{constructor(e,t){this.color="#00000",this.name=e,this.Description=t,this.effects=[],this.requirements=[]}addEffect(e){this.effects.push(e)}addRequirement(e){this.requirements.push(e)}}class UpgradeList{constructor(e){this.upgrades=e}addUpgrade(e){return this.upgrades.push(e),this.upgrades}removeUpgrade(e){return this.upgrades.splice(this.upgrades.indexOf(e),1),this.upgrades}}class AllUpgradesList extends UpgradeList{constructor(e){super(e)}get availibility(){return this.upgrades.filter((e,t,i)=>{let s=[];return e.requirements.forEach(e=>{s.push(e.IsRequirementTrue(i))}),s.every(e=>e)})}}class Effect{constructor(e,t,i){this.type=e,this.value=t,this.valuetype=i}apply(e){switch(this.type){case"d":1==this.valuetype?e.Damage+=this.value:2==this.valuetype?e.Damage*=this.value:3==this.valuetype&&(e.Damage=this.value);break;case"ss":1==this.valuetype?e.ShotSpeed+=this.value:2==this.valuetype?e.ShotSpeed*=this.value:3==this.valuetype&&(e.ShotSpeed=this.value);break;case"sf":1==this.valuetype?e.ShotsFired+=this.value:2==this.valuetype?e.ShotsFired*=this.value:3==this.valuetype&&(e.ShotsFired=this.value);break;case"ms":1==this.valuetype?e.MultiShot+=this.value:2==this.valuetype?e.MultiShot*=this.value:3==this.valuetype&&(e.MultiShot=this.value);break;case"sz":1==this.valuetype?e.ShotSize+=this.value:2==this.valuetype?e.ShotSize*=this.value:3==this.valuetype&&(e.ShotSize=this.value);break;case"h":1==this.valuetype?e.Health.Health+=this.value:2==this.valuetype?e.Health.Health*=this.value:3==this.valuetype&&(e.Health.Health=this.value)}}}class Requirement{constructor(e,t,i,s){this.requirement1=e,this.requirement2=t,this.operation=i,this.not=s}IsRequirementTrue(e){if(e.push(null),"or"==this.operation){if(!this.not)return-1!=e.indexOf(this.requirement1)||-1!=e.indexOf(this.requirement2);if(this.not)return!(-1!=e.indexOf(this.requirement1)||-1!=e.indexOf(this.requirement2))}else if("and"==this.operation){if(!this.not)return-1!=e.indexOf(this.requirement1)&&-1!=e.indexOf(this.requirement2);if(this.not)return!(-1!=e.indexOf(this.requirement1)&&-1!=e.indexOf(this.requirement2))}else if("not"==this.operation)return-1==e.indexOf(this.requirement1)}}class Halo{constructor(e,t,i,s,r){this.starts=e,this.ends=t,this.colors=i,this.isValid=this.checkForValidity(),this.x=s.x,this.y=s.y,this.radius=s.radius,this.moving=r}checkForValidity(){if(this.starts.length!=this.ends.length)throw new Error("Starts And Ends length must be the same");if(this.starts.length!=this.colors.length)throw new Error("Starts And Colors length must be the same");if(this.colors.length!=this.ends.length)throw new Error("Colors And Ends length must be the same");if(this.starts.some(e=>e>TWOPI||e<0))throw new Error("Starts must be in the range 0-2*PI");if(this.ends.some(e=>e>TWOPI||e<0))throw new Error("Ends must be in the range 0-2*PI");return!0}range(e){return[this.starts[e],this.ends[e],this.colors.values[e]]}updateVals(e){this.x=e.x,this.y=e.y,this.radius=e.radius}update(e,t){this.updateVals(t),this.step(e),this.fix()}step(e){switch(this.moving){case!1:break;case 1:for(let t=0;t<this.starts.length;t++)this.starts[t]+=.01*e,this.ends[t]+=.01*e;case 2:for(let t=0;t<this.starts.length;t++)this.speed=random(-.5,2),this.starts[t]+=.01*e*this.speed,this.ends[t]+=.01*e*this.speed}}fix(){this.ends=this.ends.map(e=>clip(e,0,TWOPI)),this.starts=this.starts.map(e=>clip(e,0,TWOPI)),this.ends[this.ends.indexOf(maxl(this.ends))]=TWOPI,this.starts[this.starts.indexOf(minl(this.starts))]=0}draw(e){let t=c;for(let i=0;i<this.starts.length;i++)t.fillStyle=this.colors[i],t.beginPath(),t.arc(this.x,this.y,this.radius+map(i,0,this.starts.length,0,2*e),this.starts[i],this.ends[i]),t.closePath(),t.fill(),t.stroke()}}class HealthBar{constructor(e,t){this.health=e,this.MaxHealth=t}get Health(){return this.health}get maxHealth(){return this.MaxHealth}set Health(e){this.health=e,this.draw()}set maxHealth(e){this.MaxHealth=e,this.draw()}addHealth(e){return this.health<this.maxHealth&&(this.health+=e),this.draw(),this.health}removeHealth(e=1){return this.health-=e,this.draw(),this.health}get willDie(){return this.health-1<=0}get dead(){return 0==this.health}draw(){let e=document.getElementById("healthBar"),t=e.children.length,i=this.MaxHealth;for(let i=0;i<t;i++)e.removeChild(e.firstChild);for(let t=0;t<i;t++){let t=document.createElement("span");t.classList.add("material-icons"),t.classList.add("healthBarSpan"),e.appendChild(t)}let s=e.children;for(let e=0;e<i;e++){var r=s.item(e);r.innerText="favorite",e<this.health?r.style.color="red":r.style.color="grey"}}}class Player{constructor(e,t,i,s){this.x=e,this.y=t,this.radius=i,this.color=s,this.cachedLevels=0,this.level=0,this.Damage=10,this.ShotSpeed=5,this.ShotsFired=1,this.MultiShot=1,this.AutoFire=!1,this.AutoRotate=!1,this.ShotSize=5,this.Health=CreateHealth(5,5),this.Health.draw(),SetDebugItem(this.Health.Health,"playerHealth")}update(){SetDebugItem(this.Health.Health,"playerHealth"),this.draw(),this.drawHealth()}drawHealth(){this.Health.draw()}draw(){c.beginPath(),c.arc(this.x,this.y,this.radius,0,TWOPI,!1),c.fillStyle=this.color,c.fill()}get willDie(){return this.Health.willDie}}class Projectile{constructor(e,t,i,s,r,a){this.x=e,this.y=t,this.radius=i,this.color=s,this.velocity=r,this.damage=a}draw(){DEBUGFLAG&&(c.strokeStyle="rgb(255,128,0)",c.rect(this.x-2*this.radius,this.y-2*this.radius,this.x+2*this.radius,this.y+2*this.radius)),c.beginPath(),c.arc(this.x,this.y,this.radius,0,TWOPI,!1),c.fillStyle=this.color,c.fill()}update(){this.draw(),this.x+=this.velocity.x,this.y+=this.velocity.y}}class Enemy{constructor(e,t,i,s,r,a){this.x=e,this.y=t,this.radius=i,this.color=s,this.velocity=r,this.startingRadius=this.radius,this.minHealth=5,this.timeCreated=Date(),this.salt=randomBetween(0,1e3),this.pepper=a,this.id=md5(this.toString),this.burning=!1,this.haloObject=new Halo([0,Math.PI,TWOPI],[Math.PI,TWOPI,0],["#ff0000","ff8800","ffff00"],this,2)}get toString(){return JSON.stringify(this)}draw(){DEBUGFLAG&&(c.strokeStyle="rgb(0,255,0)",c.rect(this.x-2*this.radius,this.y-2*this.radius,this.x+2*this.radius,this.y+2*this.radius)),this.burning&&this.haloObject.draw(5),c.beginPath(),c.arc(this.x,this.y,this.radius,0,TWOPI,!1),c.fillStyle=this.color,c.fill()}update(){this.x+=this.velocity.x,this.y+=this.velocity.y,this.haloObject.update(5,this),this.draw()}ShouldDie(e){return this.radius-e<this.minHealth}damage(e){return this.radius-=e,this.ShouldDie(e)}}class Particle{constructor(e,t,i,s,r){this.x=e,this.y=t,this.radius=i,this.color=s,this.velocity=r,this.alpha=1}draw(){DEBUGFLAG&&(c.strokeStyle="rgb(0,0,255)",c.rect(this.x-2*this.radius,this.y-2*this.radius,this.x+2*this.radius,this.y+2*this.radius)),c.save(),c.globalAlpha=this.alpha,c.beginPath(),c.arc(this.x,this.y,this.radius,0,TWOPI,!1),c.fillStyle=this.color,c.fill(),c.restore()}update(){this.draw(),this.velocity.x*=ParticleFriction,this.velocity.y*=ParticleFriction,this.x+=this.velocity.x,this.y+=this.velocity.y,this.alpha-=randomBetween(.001,.025)*ParticleFadeSpeedMultiplier}}class HighScore{constructor(){this.scores=[]}addScore(e){0!=e&&this.scores.push(e),this.sort()}sort(){this.scores.sort((e,t)=>e-t),this.scores.reverse()}isHighScore(e){return this.scores.every(t=>t<e)}get Html(){let e=document.createElement("ol");this.sort();for(let i=0;i<Math.min(this.scores.length,10);i++){const s=this.scores[i];var t=document.createElement("li");switch(i){case 0:t.style.color="#ffd700",t.appendChild(document.createTextNode(s.toString(10)));break;case 1:t.style.color="#c0c0c0",t.appendChild(document.createTextNode(s.toString(10)));break;case 2:t.style.color="#CD7F32",t.appendChild(document.createTextNode(s.toString(10)));break;default:t.style.color="#FFFFFF",t.appendChild(document.createTextNode(s.toString(10)))}e.appendChild(t)}return e.innerHTML}}class Music{constructor(e){this.music=e,this.current=0,this.music[this.current].play()}get Current(){return this.music[this.current]}get Volume(){return this.volume}set Volume(e){this.volume=e,this.music.forEach(e=>{e.volume=this.volume}),this.muted=0==this.volume}get Muted(){return this.muted}set Muted(e){this.muted=e,this.music.forEach(e=>{e.muted=this.muted})}play(){this.stopAll(),this.music[this.current].play()}pause(){this.music[this.current].pause()}next(){this.current=(this.current+1)%this.music.length,this.music[this.current].play()}previous(){this.current=(this.current-1+this.music.length)%this.music.length,this.music[this.current].play()}toggle(){this.music[this.current].paused?this.music[this.current].play():this.music[this.current].pause()}shuffle(){this.current=randomInt(0,this.music.length-1),this.music[this.current].play()}set continue(e){this.Continue=e,this.Continue?this.music[this.current].onended=(()=>{this.next()}):this.music[this.current].onended=(()=>{this.music[this.current].pause()})}stop(){this.music[this.current].pause(),this.music[this.current].currentTime=0}stopAll(){this.music.forEach(e=>{e.pause(),e.currentTime=0})}get playing(){let e=0;return this.music.forEach(t=>{t.paused||e++}),e}}const EnemySpawnTimeDecrement=1,EnemySpawnBias=window.innerHeight/window.innerWidth,EnemyHealthMultiplier=1,EnemySpeedMultiplier=1,ProjectileSpeedMultiplier=1,ProjectileColor="white",PlayerColor="white",PlayerRadius=10,BackgroundColor="0,0,0",ParticleFriction=.99,ParticleMultiplier=2,ParticleSpeed=5,ParticleFadeSpeedMultiplier=1,MaxEnemies=10,TWOPI=2*Math.PI;let lastInterval,animationID,player=new Player(cw,ch,PlayerRadius,PlayerColor),projectiles=[],enemies=[],particles=[],GameStarted=!1,UseParticles=!0,Paused=!1,ShopOpen=!1,MusicMuted=!0,EnemySpawnTime=50,score=0,DefaultEnemySpawnTime=50,enemiesToRemove=[],Scores=new HighScore,lastScore=0,freq=25e3,HS=!0,MusicPlayer=new Music([Music1]);addEventListener("click",e=>spawnProjectile(e.clientX,e.clientY)),addEventListener("mousemove",e=>updateMouseCoords(e)),addEventListener("load",()=>{PageLoad()}),startGameButton.addEventListener("click",()=>{ModalEL.style.display="none",init(),animate()}),PauseModalPlayButton.addEventListener("click",()=>{UnpauseGame()}),addEventListener("keypress",e=>{"q"==e.key&&GameStarted?Paused?(CloseOptionsMenu(),OptionsOpen=!1,UnpauseGame()):PauseGame():"space"==e.key&&GameStarted&&spawnProjectile()}),PauseModalOptionsButton.addEventListener("click",()=>{OpenOptionsMenu(),OptionsOpen=!0}),OptionsBackButton.addEventListener("click",()=>{CloseOptionsMenu(),OptionsOpen=!1}),OptionsParticleSwitch.addEventListener("change",()=>{UseParticles=!UseParticles}),OptionsSFXSlider.addEventListener("change",()=>{SFXMuted="0"==OptionsSFXSlider.value,UpdateSFXSlider()}),OptionsMusicSlider.addEventListener("change",()=>{MusicMuted="0"==OptionsMusicSlider.value,MusicPlayer.Volume=parseFloat(OptionsMusicSlider.value),PlayMusic(),MusicPlayer.shuffle(),MusicPlayer.continue=!0});